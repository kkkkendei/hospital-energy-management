{"ast":null,"code":"import axios from 'axios';\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'UserManagement',\n  data() {\n    return {\n      users: []\n    };\n  },\n  created() {\n    this.fetchUsers();\n  },\n  methods: {\n    async fetchUsers() {\n      try {\n        const response = await axios.get('/api/user-management/users');\n        this.users = response.data;\n      } catch (error) {\n        ElMessage.error('获取用户列表失败');\n        console.error('Error fetching users:', error);\n      }\n    },\n    async updateUserRole(userId, enabled) {\n      try {\n        await axios.put(`/api/user-management/users/${userId}/role?enabled=${enabled}`);\n        ElMessage.success('用户权限更新成功');\n        this.fetchUsers(); // 刷新用户列表\n      } catch (error) {\n        ElMessage.error('更新用户权限失败');\n        console.error('Error updating user role:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","ElMessage","name","data","users","created","fetchUsers","methods","response","get","error","console","updateUserRole","userId","enabled","put","success"],"sources":["src/views/UserManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-management\">\r\n    <h2>用户权限管理</h2>\r\n    \r\n    <el-table :data=\"users\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\r\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"180\" />\r\n      <el-table-column prop=\"email\" label=\"邮箱\" width=\"220\" />\r\n      <el-table-column label=\"权限\" width=\"180\">\r\n        <template #default=\"scope\">\r\n          {{ scope.row.enabled === 1 ? '管理员' : '普通用户' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template #default=\"scope\">\r\n          <el-button\r\n            v-if=\"scope.row.enabled === 2\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click=\"updateUserRole(scope.row.id, 1)\"\r\n          >\r\n            升级为管理员\r\n          </el-button>\r\n          <el-button\r\n            v-else\r\n            type=\"warning\"\r\n            size=\"small\"\r\n            @click=\"updateUserRole(scope.row.id, 2)\"\r\n          >\r\n            降级为普通用户\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\n\r\nexport default {\r\n  name: 'UserManagement',\r\n  data() {\r\n    return {\r\n      users: []\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchUsers();\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n      try {\r\n        const response = await axios.get('/api/user-management/users');\r\n        this.users = response.data;\r\n      } catch (error) {\r\n        ElMessage.error('获取用户列表失败');\r\n        console.error('Error fetching users:', error);\r\n      }\r\n    },\r\n    async updateUserRole(userId, enabled) {\r\n      try {\r\n        await axios.put(`/api/user-management/users/${userId}/role?enabled=${enabled}`);\r\n        ElMessage.success('用户权限更新成功');\r\n        this.fetchUsers(); // 刷新用户列表\r\n      } catch (error) {\r\n        ElMessage.error('更新用户权限失败');\r\n        console.error('Error updating user role:', error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-management {\r\n  padding: 20px;\r\n}\r\n\r\nh2 {\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n}\r\n</style> "],"mappings":"AAsCA,OAAAA,KAAA;AACA,SAAAC,SAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA,MAAAD,WAAA;MACA;QACA,MAAAE,QAAA,SAAAR,KAAA,CAAAS,GAAA;QACA,KAAAL,KAAA,GAAAI,QAAA,CAAAL,IAAA;MACA,SAAAO,KAAA;QACAT,SAAA,CAAAS,KAAA;QACAC,OAAA,CAAAD,KAAA,0BAAAA,KAAA;MACA;IACA;IACA,MAAAE,eAAAC,MAAA,EAAAC,OAAA;MACA;QACA,MAAAd,KAAA,CAAAe,GAAA,+BAAAF,MAAA,iBAAAC,OAAA;QACAb,SAAA,CAAAe,OAAA;QACA,KAAAV,UAAA;MACA,SAAAI,KAAA;QACAT,SAAA,CAAAS,KAAA;QACAC,OAAA,CAAAD,KAAA,8BAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}